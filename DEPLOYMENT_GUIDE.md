# Ochuko AI - Deployment Guide & Setup Wizard

**Version**: 1.0.0 Production  
**Author**: David Akpoviroro Oke (MrIridescent)  
**Target Audience**: Beginners to Advanced DevOps engineers  
**Deployment Time**: 15 minutes (automated) to 2 hours (manual)

---

## Quick Start (Automated Setup - 5 minutes)

### Prerequisites Checklist
- [ ] Docker installed (version 24.0+)
- [ ] Docker Compose installed (version 2.20+)
- [ ] 16GB RAM minimum
- [ ] 100GB free disk space
- [ ] Internet connection (for downloading images)

### One-Command Deployment

```bash
# Clone the repository
git clone https://github.com/yourusername/Ochuko AI.git
cd Ochuko AI

# Run the automated setup wizard
bash scripts/setup_wizard.sh

# Follow the interactive prompts
```

The setup wizard will:
1. âœ… Validate your environment
2. âœ… Create `.env` file with your configurations
3. âœ… Build all Docker containers
4. âœ… Initialize databases
5. âœ… Start all services
6. âœ… Run health checks
7. âœ… Display access URLs

---

## Setup Wizard Script

Create `scripts/setup_wizard.sh`:

```bash
#!/bin/bash

# Ochuko AI - Automated Setup Wizard
# This script handles complete setup from zero to production

set -e

# Color codes for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Functions
print_header() {
    echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo -e "${BLUE}$1${NC}"
    echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
}

print_success() {
    echo -e "${GREEN}âœ… $1${NC}"
}

print_error() {
    echo -e "${RED}âŒ $1${NC}"
}

print_warning() {
    echo -e "${YELLOW}âš ï¸ $1${NC}"
}

# Start setup
clear
print_header "Ochuko AI - Setup Wizard v1.0"
echo ""
echo "Welcome! This wizard will set up Ochuko AI for you."
echo "Total setup time: ~5 minutes (automated)"
echo ""

# Step 1: Environment Check
print_header "Step 1: Checking Environment"

# Check Docker
if ! command -v docker &> /dev/null; then
    print_error "Docker not found. Please install Docker first."
    exit 1
fi
DOCKER_VERSION=$(docker --version | cut -d' ' -f3 | cut -d',' -f1)
print_success "Docker found: $DOCKER_VERSION"

# Check Docker Compose
if ! command -v docker-compose &> /dev/null; then
    print_error "Docker Compose not found. Please install Docker Compose."
    exit 1
fi
print_success "Docker Compose found"

# Check disk space
AVAILABLE_SPACE=$(df . | tail -1 | awk '{print $4}')
REQUIRED_SPACE=$((100 * 1024 * 1024))  # 100GB in KB

if [ "$AVAILABLE_SPACE" -lt "$REQUIRED_SPACE" ]; then
    print_warning "Low disk space. Recommended: 100GB, Available: $(( $AVAILABLE_SPACE / 1024 / 1024 ))GB"
else
    print_success "Sufficient disk space available"
fi

# Step 2: Configuration Setup
print_header "Step 2: Configuring Environment"

# Ask for deployment mode
echo ""
echo "What deployment mode do you want?"
echo "1) Development (localhost, faster setup)"
echo "2) Staging (cloud-ready, secure)"
echo "3) Production (high availability, secure)"
read -p "Select (1-3): " DEPLOYMENT_MODE

case $DEPLOYMENT_MODE in
    1)
        DEPLOYMENT="development"
        COMPOSE_FILE="docker-compose.dev.yml"
        print_success "Development mode selected"
        ;;
    2)
        DEPLOYMENT="staging"
        COMPOSE_FILE="docker-compose.staging.yml"
        print_success "Staging mode selected"
        ;;
    3)
        DEPLOYMENT="production"
        COMPOSE_FILE="docker-compose.prod.yml"
        print_success "Production mode selected"
        ;;
    *)
        print_error "Invalid selection"
        exit 1
        ;;
esac

# Ask for API keys
echo ""
read -p "Enter your OpenAI API key (or press Enter to skip): " OPENAI_API_KEY
read -p "Enter your Claude API key (or press Enter to skip): " CLAUDE_API_KEY

# Create .env file
print_header "Step 3: Creating Configuration"

cat > .env << EOF
# Ochuko AI Configuration
# Generated by setup wizard

ENV=$DEPLOYMENT
DEBUG=false
LOG_LEVEL=INFO

# Server
HOST=0.0.0.0
PORT=8000

# LLM APIs
OPENAI_API_KEY=${OPENAI_API_KEY:-"sk-"}
CLAUDE_API_KEY=${CLAUDE_API_KEY:-"sk-"}

# Database
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/ochuko_ai
MONGO_URI=mongodb://mongodb:27017/ochuko_ai
REDIS_URL=redis://redis:6379/0

# Features
ENABLE_VOICE=true
ENABLE_FACE_RECOGNITION=true
ENABLE_EMOTION_DETECTION=true
ENABLE_LEARNING=true
ENABLE_THINKING=true

# Security
SECRET_KEY=$(openssl rand -hex 32)
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# Frontend
VITE_API_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000
VITE_APP_NAME=Ochuko AI
EOF

print_success "Configuration file created (.env)"

# Step 4: Build and Start Services
print_header "Step 4: Building & Starting Services"

if [ "$DEPLOYMENT" == "development" ]; then
    print_warning "Starting services in development mode..."
else
    print_warning "Building Docker images (this may take 5-10 minutes)..."
fi

docker-compose -f docker-compose.yml up -d --build

if [ $? -eq 0 ]; then
    print_success "All services started"
else
    print_error "Failed to start services"
    exit 1
fi

# Step 5: Wait for services
print_header "Step 5: Waiting for Services to be Ready"

echo "Waiting for services to initialize..."
sleep 10

# Health checks
print_header "Step 6: Running Health Checks"

# Check API
if curl -s http://localhost:8000/health | grep -q "operational"; then
    print_success "API server is running"
else
    print_warning "API health check pending (may take a moment)"
fi

# Check PostgreSQL
if docker-compose exec -T postgres pg_isready -U postgres &> /dev/null; then
    print_success "PostgreSQL is ready"
else
    print_warning "PostgreSQL initializing..."
fi

# Step 7: Display Access Information
print_header "Setup Complete! ðŸŽ‰"

echo ""
echo "Access your Ochuko AI instance:"
echo ""
echo -e "${BLUE}Frontend:${NC}"
echo "  http://localhost:3000"
echo ""
echo -e "${BLUE}API:${NC}"
echo "  http://localhost:8000"
echo ""
echo -e "${BLUE}API Documentation:${NC}"
echo "  http://localhost:8000/docs"
echo ""
echo -e "${BLUE}Useful Commands:${NC}"
echo "  View logs:        docker-compose logs -f"
echo "  Stop services:    docker-compose down"
echo "  Restart services: docker-compose restart"
echo ""
echo -e "${YELLOW}Next Steps:${NC}"
echo "  1. Open http://localhost:3000 in your browser"
echo "  2. Create your user account"
echo "  3. Try the demo features"
echo "  4. Read the documentation at README.md"
echo ""

# Optional: Open browser
if command -v xdg-open &> /dev/null; then
    read -p "Open browser now? (y/n): " OPEN_BROWSER
    if [ "$OPEN_BROWSER" == "y" ]; then
        xdg-open http://localhost:3000
    fi
fi

print_success "Setup wizard completed successfully!"
echo ""
```

---

## Manual Deployment

### Prerequisites

```bash
# System requirements
- OS: Linux, macOS, or Windows (WSL2)
- Docker: 24.0+
- Docker Compose: 2.20+
- Python: 3.11+
- Node.js: 18+
- RAM: 16GB minimum
```

### Step-by-Step Deployment

#### 1. Clone Repository

```bash
git clone https://github.com/yourusername/Ochuko AI.git
cd Ochuko AI
```

#### 2. Configure Environment

```bash
# Copy example environment file
cp .env.example .env

# Edit with your values
nano .env

# Required changes:
# - OPENAI_API_KEY: Your OpenAI key
# - CLAUDE_API_KEY: Your Anthropic key
# - SECRET_KEY: Generate with: openssl rand -hex 32
```

#### 3. Build Services

```bash
# Build all Docker images
docker-compose build

# Or build specific service
docker-compose build backend
docker-compose build frontend
```

#### 4. Start Services

```bash
# Start all services
docker-compose up -d

# Verify services started
docker-compose ps

# Expected output:
# NAME                    STATUS
# ochuko-ai-backend      Up
# ochuko-ai-frontend     Up
# ochuko-ai-postgres     Up
# ochuko-ai-redis        Up
# ochuko-ai-mongodb      Up
```

#### 5. Initialize Databases

```bash
# Run migrations
docker-compose exec backend python -m alembic upgrade head

# Create admin user
docker-compose exec backend python -c "from src.admin import create_admin; create_admin()"
```

#### 6. Verify Installation

```bash
# Test API health
curl http://localhost:8000/health

# Expected response:
# {"status":"operational","systems":{...}}

# Test frontend
open http://localhost:3000
```

---

## Cloud Deployment

### AWS Deployment

```yaml
# Terraform configuration example
terraform {
  required_providers {
    aws = {
      source = "hashicorp/aws"
    }
  }
}

provider "aws" {
  region = "us-east-1"
}

# ECS Cluster
resource "aws_ecs_cluster" "main" {
  name = "ochuko-ai-prod"
}

# ECR Repository
resource "aws_ecr_repository" "backend" {
  name = "ochuko-ai-backend"
}

# RDS PostgreSQL
resource "aws_db_instance" "postgres" {
  allocated_storage = 100
  engine            = "postgres"
  instance_class    = "db.r5.2xlarge"
  # ... more configuration
}

# (Full Terraform config provided in deployment scripts)
```

### Google Cloud Deployment

```bash
# Create GKE cluster
gcloud container clusters create ochuko-ai \
  --zone us-central1-a \
  --num-nodes 3 \
  --machine-type n1-standard-4

# Deploy with Helm
helm install ochuko-ai ./helm-chart \
  --values prod-values.yaml
```

### Azure Deployment

```bash
# Create resource group
az group create --name ochukoai-rg --location eastus

# Create AKS cluster
az aks create \
  --resource-group ochukoai-rg \
  --name ochukoai-aks \
  --node-count 3
```

---

## Production Checklist

- [ ] SSL/TLS certificates configured
- [ ] Database backups automated
- [ ] Monitoring enabled (Prometheus)
- [ ] Logging centralized (ELK)
- [ ] Secrets managed (Vault/KMS)
- [ ] Auto-scaling configured
- [ ] Load balancer configured
- [ ] CDN enabled
- [ ] DDoS protection enabled
- [ ] Disaster recovery plan
- [ ] Security audit completed
- [ ] Performance tested

---

## Troubleshooting

### Services won't start

```bash
# Check Docker daemon
docker ps

# Check logs
docker-compose logs

# Rebuild containers
docker-compose down
docker-compose up -d --build
```

### Database connection errors

```bash
# Check database is running
docker-compose ps postgres

# Verify connection string in .env
# Format: postgresql://user:password@host:port/database

# Reset database
docker-compose down -v
docker-compose up -d
```

### API not responding

```bash
# Check API logs
docker-compose logs backend

# Restart API service
docker-compose restart backend

# Test health endpoint
curl -v http://localhost:8000/health
```

---

## Next Steps

1. **Configuration**: Fine-tune `.env` settings
2. **Integration**: Connect to your services
3. **Testing**: Run the test suite
4. **Monitoring**: Set up monitoring dashboard
5. **Backup**: Configure automated backups

---

**Support**: Refer to README.md and TECHNICAL_SPECIFICATIONS.md for additional help.
